{"version":3,"sources":["../es6/tile.js"],"names":[],"mappings":"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","file":"tile.js","sourcesContent":["class Tile {\r\n\tconstructor(value, parentSelector, size=\"100%\") {\r\n\r\n\t\tUtils.assert(typeof value === \"string\", \"Invalid parameter: value\" + ((value !== undefined) ? ` (${value})` : \"\"));\r\n\t\tUtils.assert($(parentSelector).length > 0, \"Invalid parameter: parentSelector\" + ((parentSelector !== undefined) ? ` (${parentSelector})` : \"\"));\r\n\t\tUtils.assert($(parentSelector).length === 1, `Invalid parentSelector (too many matches): ${parentSelector}`);\r\n\r\n\t\tvar valueRegex = /^([^\\d\\s]*)\\s?(\\d+(?:(\\/|\\^)\\d+)?)$/.exec(value);\r\n\r\n\t\tUtils.assert(valueRegex !== null, `Invalid parameter: value (${value})`);\r\n\r\n\t\tvar operatorPart = valueRegex[1];\r\n\t\tvar valuePart = valueRegex[2];\r\n\t\tvar typePart = valueRegex[3];\r\n\r\n\t\tthis.value = valuePart;\r\n\r\n\t\tif (operatorPart !== \"\") {\r\n\t\t\tUtils.assert(Tile._isOperator(operatorPart), `Invalid operation in value: ${operatorPart}`);\r\n\t\t\tthis.operation = Tile.operations[operatorPart];\r\n\t\t}\r\n\t\telse this.operation = undefined;\r\n\r\n\t\tvar isInteger = typePart === undefined;\r\n\r\n\t\ttry { math.parse(this.value); }\r\n\t\tcatch(e) { throw `Cannot parse math: ${value}`; }\r\n\r\n\t\tthis.parentSelector = parentSelector;\r\n\t\tthis.size = size;\r\n\r\n\t\tthis.$element = $(\"<div>\").addClass(\"tile\");\r\n\t\tif (this.operation !== undefined) this.$element.attr(\"data-operation\", this.operation);\r\n\t\tthis.element = this.$element.get(0);\r\n\r\n\t\tvar mathNode = math.parse(this.value);\r\n\t\tthis.computedValue = mathNode.compile().eval();\r\n\t\tthis.$element.attr(\"data-value\", this.computedValue);\r\n\r\n\t\tif (isInteger) this.$element.html($(\"<div>\").addClass(\"math\").text(this.value));\r\n\t\telse {\r\n\t\t\tvar tex = mathNode.toTex({parenthesis: \"auto\"});\r\n\t\t\tthis.element.innerHTML = `$$ ${tex} $$`;\r\n\t\t}\r\n\r\n\t\tthis.hide();\r\n\t\t\r\n\t\tthis.$element.appendTo($(this.parentSelector));\r\n\t\t\r\n\t\t// TODO delay fade in to allow mathjax to do its thing (maybe even pre-load the tiles?)\r\n\r\n\t\tthis.$element.outerHeight(this.size);\r\n\t\tthis.$element.remove().appendTo($(this.parentSelector));\r\n\t\tthis.$element.outerWidth(this.$element.outerHeight());\r\n\r\n\t\tif (!isInteger) {\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\", MathJax.Hub, this.element],\r\n\t\t\t\t() => Utils.scaleToFit(this.$element, \".math\", .9));\r\n\t\t}\r\n\t\telse Utils.scaleToFit(this.$element, \".math\");\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.$element._hide(true);\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.$element._show();\r\n\t}\r\n\r\n\tremove() {\r\n\t\tthis.$element.remove();\r\n\t}\r\n\r\n\tstatic _isOperator(op) {\r\n\t\treturn Tile.operations.hasOwnProperty(op);\r\n\t}\r\n}\r\n\r\nTile.operations = {\r\n\t\"+\": \"+\",\r\n\tplus: \"+\",\r\n\tadd: \"+\",\r\n\taddition: \"+\",\r\n\r\n\t\"-\" : \"-\",\r\n\tsub: \"-\",\r\n\tsubtract: \"-\",\r\n\tminus: \"-\",\r\n\r\n\t\"*\": \"*\",\r\n\ttimes: \"*\",\r\n\tmulti: \"*\",\r\n\tmultiply: \"*\", // displays \"x\" on page\r\n\t\r\n\t\"/\": \"/\",\r\n\tdiv: \"/\",\r\n\tover: \"/\",\r\n\tdivide: \"/\",\r\n\t\"divided by\": \"/\" // displays division symbol on page\r\n};"]}