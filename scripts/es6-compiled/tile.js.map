{"version":3,"sources":["../es6/tile.js"],"names":[],"mappings":"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","file":"tile.js","sourcesContent":["class Tile {\n\tconstructor(value, parentSelector, size=\"100%\") {\n\n\t\tUtils.assert(typeof value === \"string\", \"Invalid parameter: value\" + ((value !== undefined) ? ` (${value})` : \"\"));\n\t\tUtils.assert($(parentSelector).length > 0, \"Invalid parameter: parentSelector\" + ((parentSelector !== undefined) ? ` (${parentSelector})` : \"\"));\n\t\tUtils.assert($(parentSelector).length === 1, `Invalid parentSelector (too many matches): ${parentSelector}`);\n\n\t\tvar valueRegex = /^([^\\d\\s]*)\\s?(\\d+(?:\\s?(\\/|\\^)\\s?\\d+)?)$/.exec(value);\n\n\t\tUtils.assert(valueRegex !== null, `Invalid parameter: value (${value})`);\n\n\t\tvar operatorPart = valueRegex[1];\n\t\tvar valuePart = valueRegex[2];\n\t\tvar typePart = valueRegex[3];\n\n\t\tthis.value = valuePart;\n\n\t\tif (operatorPart !== \"\") {\n\t\t\tUtils.assert(Tile._isOperator(operatorPart), `Invalid operation in value: ${operatorPart}`);\n\t\t\tthis.operation = Tile.operations[operatorPart];\n\t\t}\n\t\telse this.operation = undefined;\n\n\t\tvar isInteger = typePart === undefined;\n\n\t\ttry { math.parse(this.value); }\n\t\tcatch(e) { throw `Cannot parse math: ${value}`; }\n\n\t\tthis.parentSelector = parentSelector;\n\t\tthis.size = size;\n\n\t\tthis.$element = $(\"<div>\").addClass(\"tile\");\n\t\tif (this.operation !== undefined) this.$element.attr(\"data-operation\", this.operation);\n\t\tthis.element = this.$element.get(0);\n\n\t\tvar mathNode = math.parse(this.value);\n\t\tthis.computedValue = mathNode.compile().eval();\n\t\tthis.$element.attr(\"data-value\", this.computedValue);\n\n\t\tif (isInteger) this.$element.html($(\"<div>\").addClass(\"math\").text(this.value));\n\t\telse {\n\t\t\tvar tex = mathNode.toTex({parenthesis: \"auto\"});\n\t\t\tthis.element.innerHTML = `$$ ${tex} $$`;\n\t\t}\n\n\t\tthis.hide();\n\t\t\n\t\tthis.$element.appendTo($(this.parentSelector));\n\n\t\tthis.$element.outerHeight(this.size);\n\t\tthis.$element.remove().appendTo($(this.parentSelector));\n\t\tthis.$element.outerWidth(this.$element.outerHeight());\n\n\t\tvar ready = () => {\n\t\t\tUtils.scaleToFit(this.$element, \".math\");\n\t\t\tthis.show();\n\t\t};\n\n\t\tif (!isInteger) {\n\t\t\tMathJax.Hub.Queue([\"Typeset\", MathJax.Hub, this.element], ready);\n\t\t}\n\t\telse ready();\n\n\t\t//console.log(`tile created: ${value} in ${parentSelector}`)\n\t}\n\n\thide() {\n\t\tthis.$element._hide(true);\n\t}\n\n\tshow() {\n\t\tthis.$element._show();\n\t}\n\n\tremove() {\n\t\tthis.$element.remove();\n\t}\n\n\tstatic _isOperator(op) {\n\t\treturn Tile.operations.hasOwnProperty(op);\n\t}\n}\n\nTile.operations = {\n\t\"+\": \"+\",\n\tplus: \"+\",\n\tadd: \"+\",\n\taddition: \"+\",\n\n\t\"-\" : \"-\",\n\tsub: \"-\",\n\tsubtract: \"-\",\n\tminus: \"-\",\n\n\t\"*\": \"*\",\n\ttimes: \"*\",\n\tmulti: \"*\",\n\tmultiply: \"*\", // displays \"x\" on page\n\t\n\t\"/\": \"/\",\n\tdiv: \"/\",\n\tover: \"/\",\n\tdivide: \"/\",\n\t\"divided by\": \"/\" // displays division symbol on page\n};"]}