{"version":3,"sources":["../es6/utils.js"],"names":[],"mappings":"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","file":"utils.js","sourcesContent":["$(function() {\n\n\t$.fn._show = function() {\n\t\t$(this).removeClass(\"hidden hiddenAlt\");\n\t\treturn $(this);\n\t};\n\n\t$.fn._hide = function(alt) {\n\t\t$(this).addClass(\"hidden\" + (alt ? \"Alt\" : \"\"));\n\t\treturn $(this);\n\t};\n\n\t$.fn._setHidden = function(isHidden, alt) {\n\t\tif (isHidden) $(this)._hide(alt);\n\t\telse $(this)._show();\n\t\treturn $(this);\n\t};\n\n\t$(\"body\").keydown(function(e) {\n\t\tif (e.which === 192) // ~ or `\n\t\t\tUtils.toggleDebug();\n\t});\n\n});\n\nvar Utils = {};\n\nUtils.toggleDebug = function() { $(\"body\").toggleClass(\"debug\"); };\n\nUtils.parseForm = function(formID) {\n\tvar $form = $(\"#\" + formID);\n\tvar data = {};\n\t$form.find(\"[name]\").each(function() {\n\t\tvar val;\n\t\tswitch (this.type) {\n\t\t\tcase \"checkbox\":\n\t\t\t\tval = this.checked;\n\t\t\t\tbreak;\n\t\t\tcase \"select-one\":\n\t\t\t\tval = this.value;\n\t\t\t\tbreak;\n\t\t\tcase \"number\":\n\t\t\t\tval = +this.value;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tval = this.value;\n\t\t}\n\n\t\tif (val.length === 1 && val.charCodeAt(0) === 8734 && this.max) val = this.max;\n\t\tif ($.isNumeric(val)) val = +val;\n\t\tdata[this.name] = val;\n\t});\n\treturn data;\n};\n\nUtils.rand = function(min, max, allowFloats) {\n\tif (allowFloats)\n\t\treturn min + (Math.random() * (max-min));\n\telse\n\t\treturn min + Math.floor(Math.random() * (max-min+1));\n};\n\nUtils.forEachIn = function(func, obj) {\n\tfor (var i in obj) {\n\t\tif (obj.hasOwnProperty(i)) {\n\t\t\tfunc(i, obj[i]);\n\t\t}\n\t}\n};\n\nUtils.scaleToFit = function(parent, childSel, ratio) {\n\n\tvar $parent;\n\tif (typeof parent === \"string\" || parent instanceof HTMLElement || parent instanceof HTMLCollection)\n\t\t$parent = $(parent);\n\telse if (parent instanceof $) $parent = parent;\n\telse throw \"parent is not a selector, element, or jQuery object\";\n\n\tif (typeof childSel !== \"string\") throw \"childSelector must be a string\";\n\n\tratio = ratio || 1;\n\n\t$parent.each(function() {\n\t\tvar $p = $(this);\n\t\tvar $c = $p.find(childSel);\n\n\t\tvar max, parentMax;\n\t\tif ($c.width() < $c.height()) {\n\t\t\tmax = $c.height();\n\t\t\tparentMax = $p.height();\n\t\t}\n\t\telse {\n\t\t\tmax = $c.width();\n\t\t\tparentMax = $p.width();\n\t\t}\n\n\t\tvar scaleFactor = parentMax / max * ratio;\n\t\tvar scale = \"scale(\" + scaleFactor + \")\";\n\n\t\t$c.css(\"transform\", scale);\n\n\t\tif ($c.css(\"display\") === \"inline\") $c.css(\"display\", \"inline-block\");\n\n\t});\n};\n\nUtils.generateStylesheet = function(templateID, globalStyles, customResultID) {\n    customResultID = (customResultID !== undefined) ? \"_\"+customResultID : \"\";\n\t$(\"head style#\" + templateID + customResultID + \"_replaced\").remove();\n\tvar $template = $(\"head template#\" + templateID);\n\tvar s = $(\"<style>\").html($template.html()).attr(\"id\", templateID  + customResultID + \"_replaced\").html(function(i, old) {\n\n\t\tvar html = old.replace(/(;|\\{)\\n/gm, \"$1\").replace(/\\t+/g, \" \").replace(/\\n\\s/g, \"\\n\");\n\n\t\tUtils.forEachIn(function(prop, style) {\n\t\t\thtml = html.replace(\n\t\t\t\tnew RegExp(\"\\\\{\" + prop + \"\\\\}\", \"g\"),\n\t\t\t\tstyle\n\t\t\t);\n\t\t}, globalStyles);\n\t\treturn html.trim();\n\t});\n\t$template.after(s);\n};\n\nUtils.assert = function(condition, errorMessage) {\n\tif (!condition) {\n\t\tif (Error) throw new Error(errorMessage || \"Assert Failed\");\n\t\telse throw errorMessage || \"Assert Failed\";\n\t}\n};\n\nUtils.pickWeightedRandom = function(choices) {\n\tvar ret = undefined;\n\tchoices = $.extend(true, [], choices);\n\tif (choices.length === 1) ret = choices[0];\n\telse {\n\t\tvar currentCumSum = 0;\n\t\tchoices.forEach(function(c){\n\t\t\tUtils.assert(c.hasOwnProperty(\"weight\"),\n\t\t\t\t`Invalid parameter format - each object in array needs a weight. (${JSON.stringify(choices)})`);\n\t\t\tcurrentCumSum += c.weight;\n\t\t\tc.cumSum = currentCumSum;\n\t\t});\n\t\tvar r = Utils.rand(0,currentCumSum, true);\n\t\tchoices.forEach(function(c, i){\n\t\t\tif (r < c.cumSum && !ret) ret = choices[i];\n\t\t});\n\t\tdelete ret.cumSum;\n\t}\n\treturn ret;\n};"]}