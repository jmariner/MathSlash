{"version":3,"sources":["../es6/utils.js"],"names":[],"mappings":"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","file":"utils.js","sourcesContent":["$(function() {\r\n\r\n\t$.fn._show = function() {\r\n\t\t$(this).removeClass(\"hidden hiddenAlt\");\r\n\t\treturn $(this);\r\n\t};\r\n\r\n\t$.fn._hide = function(alt) {\r\n\t\t$(this).addClass(\"hidden\" + (alt ? \"Alt\" : \"\"));\r\n\t\treturn $(this);\r\n\t};\r\n\r\n\t$.fn._setHidden = function(isHidden, alt) {\r\n\t\tif (isHidden) $(this)._hide(alt);\r\n\t\telse $(this)._show();\r\n\t\treturn $(this);\r\n\t};\r\n\r\n\t$(\"body\").keydown(function(e) {\r\n\t\tif (e.which === 192) // ~ or `\r\n\t\t\tUtils.toggleDebug();\r\n\t});\r\n\r\n});\r\n\r\nvar Utils = {};\r\n\r\nUtils.toggleDebug = function() { $(\"body\").toggleClass(\"debug\"); };\r\n\r\nUtils.parseForm = function(formID) {\r\n\tvar $form = $(\"#\" + formID);\r\n\tvar data = {};\r\n\t$form.find(\"[name]\").each(function() {\r\n\t\tvar val;\r\n\t\tswitch (this.type) {\r\n\t\t\tcase \"checkbox\":\r\n\t\t\t\tval = this.checked;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"select-one\":\r\n\t\t\t\tval = this.value;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"number\":\r\n\t\t\t\tval = +this.value;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tval = this.value;\r\n\t\t}\r\n\r\n\t\tif (val.length === 1 && val.charCodeAt(0) === 8734 && this.max) val = this.max;\r\n\t\tif ($.isNumeric(val)) val = +val;\r\n\t\tdata[this.name] = val;\r\n\t});\r\n\treturn data;\r\n};\r\n\r\nUtils.rand = function(min, max, allowFloats) {\r\n\tif (allowFloats)\r\n\t\treturn min + (Math.random() * (max-min));\r\n\telse\r\n\t\treturn min + Math.floor(Math.random() * (max-min+1));\r\n};\r\n\r\nUtils.forEachIn = function(func, obj) {\r\n\tfor (var i in obj) {\r\n\t\tif (obj.hasOwnProperty(i)) {\r\n\t\t\tfunc(i, obj[i]);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nUtils.scaleToFit = function(parent, childSel, ratio) {\r\n\r\n\tvar $parent;\r\n\tif (typeof parent === \"string\" || parent instanceof HTMLElement || parent instanceof HTMLCollection)\r\n\t\t$parent = $(parent);\r\n\telse if (parent instanceof $) $parent = parent;\r\n\telse throw \"parent is not a selector, element, or jQuery object\";\r\n\r\n\tif (typeof childSel !== \"string\") throw \"childSelector must be a string\";\r\n\r\n\tratio = ratio || 1;\r\n\r\n\t$parent.each(function() {\r\n\t\tvar $p = $(this);\r\n\t\tvar $c = $p.find(childSel);\r\n\r\n\t\tvar max, parentMax;\r\n\t\tif ($c.width() < $c.height()) {\r\n\t\t\tmax = $c.height();\r\n\t\t\tparentMax = $p.height();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmax = $c.width();\r\n\t\t\tparentMax = $p.width();\r\n\t\t}\r\n\r\n\t\tvar scaleFactor = parentMax / max * ratio;\r\n\t\tvar scale = \"scale(\" + scaleFactor + \")\";\r\n\r\n\t\t$c.css(\"transform\", scale);\r\n\r\n\t\tif ($c.css(\"display\") === \"inline\") $c.css(\"display\", \"inline-block\");\r\n\r\n\t});\r\n};\r\n\r\nUtils.generateStylesheet = function(templateID, globalStyles, customResultID) {\r\n    customResultID = (customResultID !== undefined) ? \"_\"+customResultID : \"\";\r\n\t$(\"head style#\" + templateID + customResultID + \"_replaced\").remove();\r\n\tvar $template = $(\"head template#\" + templateID);\r\n\tvar s = $(\"<style>\").html($template.html()).attr(\"id\", templateID  + customResultID + \"_replaced\").html(function(i, old) {\r\n\r\n\t\tvar html = old.replace(/(;|\\{)\\n/gm, \"$1\").replace(/\\t+/g, \" \").replace(/\\n\\s/g, \"\\n\");\r\n\r\n\t\tUtils.forEachIn(function(prop, style) {\r\n\t\t\thtml = html.replace(\r\n\t\t\t\tnew RegExp(\"\\\\{\" + prop + \"\\\\}\", \"g\"),\r\n\t\t\t\tstyle\r\n\t\t\t);\r\n\t\t}, globalStyles);\r\n\t\treturn html.trim();\r\n\t});\r\n\t$template.after(s);\r\n};\r\n\r\nUtils.assert = function(condition, errorMessage) {\r\n\tif (!condition) {\r\n\t\tif (Error) throw new Error(errorMessage || \"Assert Failed\");\r\n\t\telse throw errorMessage || \"Assert Failed\";\r\n\t}\r\n};\r\n\r\nUtils.pickWeightedRandom = function(choices) {\r\n\tvar ret = undefined;\r\n\tchoices = $.extend(true, [], choices);\r\n\tif (choices.length === 1) ret = choices[0];\r\n\telse {\r\n\t\tvar currentCumSum = 0;\r\n\t\tchoices.forEach(function(c){\r\n\t\t\tUtils.assert(c.hasOwnProperty(\"weight\"),\r\n\t\t\t\t`Invalid parameter format - each object in array needs a weight. (${JSON.stringify(choices)})`);\r\n\t\t\tcurrentCumSum += c.weight;\r\n\t\t\tc.cumSum = currentCumSum;\r\n\t\t});\r\n\t\tvar r = Utils.rand(0,currentCumSum, true);\r\n\t\tchoices.forEach(function(c, i){\r\n\t\t\tif (r < c.cumSum && !ret) ret = choices[i];\r\n\t\t});\r\n\t\tdelete ret.cumSum;\r\n\t}\r\n\treturn ret;\r\n};"]}